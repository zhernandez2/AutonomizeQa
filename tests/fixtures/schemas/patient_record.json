{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Patient Record Schema",
  "description": "Schema for patient record data validation",
  "type": "object",
  "required": [
    "patient_id",
    "first_name",
    "last_name",
    "date_of_birth",
    "ssn",
    "medical_record_number"
  ],
  "properties": {
    "patient_id": {
      "type": "string",
      "pattern": "^PAT[0-9]{3,}$",
      "description": "Unique patient identifier"
    },
    "first_name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 100,
      "description": "Patient's first name"
    },
    "last_name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 100,
      "description": "Patient's last name"
    },
    "date_of_birth": {
      "type": "string",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
      "description": "Patient's date of birth in YYYY-MM-DD format"
    },
    "gender": {
      "type": "string",
      "enum": ["M", "F", "O", "U"],
      "description": "Patient's gender: M=Male, F=Female, O=Other, U=Unknown"
    },
    "ssn": {
      "type": "string",
      "pattern": "^(\\*{3}-\\*{2}-[0-9]{4}|[0-9]{3}-[0-9]{2}-[0-9]{4})$",
      "description": "Social Security Number (masked or full)"
    },
    "medical_record_number": {
      "type": "string",
      "pattern": "^MRN[0-9]{6,}$",
      "description": "Medical record number"
    },
    "address": {
      "type": "object",
      "properties": {
        "street": {
          "type": "string",
          "minLength": 1,
          "maxLength": 200
        },
        "city": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "state": {
          "type": "string",
          "pattern": "^[A-Z]{2}$",
          "description": "Two-letter state code"
        },
        "zip": {
          "type": "string",
          "pattern": "^[0-9]{5}(-[0-9]{4})?$",
          "description": "ZIP code"
        }
      },
      "required": ["street", "city", "state", "zip"]
    },
    "phone": {
      "type": "string",
      "pattern": "^[0-9]{3}-[0-9]{3}-[0-9]{4}$",
      "description": "Phone number in XXX-XXX-XXXX format"
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Email address"
    },
    "insurance": {
      "type": "object",
      "properties": {
        "provider": {
          "type": "string",
          "minLength": 1
        },
        "policy_number": {
          "type": "string",
          "minLength": 1
        },
        "group_number": {
          "type": "string",
          "minLength": 1
        }
      },
      "required": ["provider", "policy_number"]
    }
  }
}

